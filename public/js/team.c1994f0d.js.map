{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.set.js","webpack:///./src/pages/Team.vue?96f7","webpack:///./src/store/modules/rounds.js","webpack:///./src/pages/Team.vue","webpack:///./src/pages/Team.vue?160f","webpack:///./src/pages/Team.vue?e870"],"names":["collection","collectionStrong","module","exports","init","this","arguments","length","undefined","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","teamId","gameId","model","value","callback","$$v","currentTab","expression","_l","tab","i","key","_v","_s","name","tabItem","component","_b","tag","team","rounds","_e","staticRenderFns","namespaced","state","mutations","CREATE_ROUND","payload","SET_ROUNDS","DELETE_ROUND","filter","round","_id","actions","createRound","commit","user","localStorage","getItem","roundPayload","root","axios","post","createdRound","data","loadRounds","get","params","deleteRound","delete","getters","getRounds","query","teamRounds","components","RoundsTable","TheTitle","TheBarsChart","TheTendenciesChart","props","type","String","required","setup","$store","$route","games","getGame","game","teams","getTeams","gameTeam","forEach","winner","tabs","tabsToShow","icon","roundsMonths","map","date","Date","getMonth","hasRoundsInDifferentMonths","Set","size","push","showTable","dispatch","val","immediate","deep","store","isRounds","hasModule","registerModule","VIcon","VTab","VTabItem","VTabs","VTabsItems","VTabsSlider"],"mappings":"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","file":"js/team.c1994f0d.js","sourcesContent":["'use strict';\nvar collection = require('../internals/collection');\nvar collectionStrong = require('../internals/collection-strong');\n\n// `Set` constructor\n// https://tc39.es/ecma262/#sec-set-objects\nmodule.exports = collection('Set', function (init) {\n  return function Set() { return init(this, arguments.length ? arguments[0] : undefined); };\n}, collectionStrong);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"team-details mb-4\"},[_c('the-title',{staticClass:\"mb-4\",attrs:{\"title\":\"Rounds\",\"icon\":\"sword-cross\",\"props\":{ teamId: _vm.teamId, gameId: _vm.gameId },\"component\":\"rounds-add-dialog\"}}),(_vm.showTable)?_c('div',[_c('v-tabs',{attrs:{\"background-color\":\"primary\",\"centered\":\"\",\"dark\":\"\",\"icons-and-text\":\"\"},model:{value:(_vm.currentTab),callback:function ($$v) {_vm.currentTab=$$v},expression:\"currentTab\"}},[_c('v-tabs-slider',{attrs:{\"color\":\"secondary\"}}),_vm._l((_vm.tabs),function(tab,i){return _c('v-tab',{key:i,attrs:{\"href\":(\"#tab-\" + i)}},[_c('span',{staticClass:\"mt-2\"},[_vm._v(_vm._s(tab.name))]),_c('v-icon',[_vm._v(_vm._s((\"mdi-\" + (tab.icon))))])],1)})],2),_c('v-tabs-items',{model:{value:(_vm.currentTab),callback:function ($$v) {_vm.currentTab=$$v},expression:\"currentTab\"}},_vm._l((_vm.tabs),function(tabItem,i){return _c('v-tab-item',{key:i,attrs:{\"value\":(\"tab-\" + i)}},[_c(tabItem.component,_vm._b({tag:\"component\"},'component',{ team: _vm.team, rounds: _vm.rounds },false))],1)}),1)],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import axios from 'axios';\n\nexport default {\n  namespaced: true,\n  state: {\n    rounds: null\n  },\n  mutations: {\n    CREATE_ROUND(state, payload) {\n      state.rounds\n        ? (state.rounds = [...state.rounds, payload])\n        : (state.rounds = [payload]);\n    },\n    SET_ROUNDS(state, payload) {\n      state.rounds = payload;\n    },\n    DELETE_ROUND(state, payload) {\n      const rounds = state.rounds.filter(round => round._id !== payload);\n      rounds.length ? (state.rounds = rounds) : (state.rounds = null);\n    }\n  },\n  actions: {\n    async createRound({ commit }, payload) {\n      try {\n        const user = localStorage.getItem('userId');\n        const roundPayload = {\n          ...payload,\n          user\n        };\n        commit('LOADING', true, { root: true });\n        const createdRound = await axios.post('/api/rounds', roundPayload);\n        commit('CREATE_ROUND', { ...createdRound.data });\n      } catch (e) {\n        commit('ERROR', e, { root: true });\n      } finally {\n        commit('LOADING', false, { root: true });\n      }\n    },\n    async loadRounds({ commit }) {\n      try {\n        const user = localStorage.getItem('userId');\n        commit('LOADING', true, { root: true });\n        const rounds = await axios.get('/api/rounds', { params: { user } });\n        commit('SET_ROUNDS', rounds.data);\n      } catch (e) {\n        commit('ERROR', e, { root: true });\n      } finally {\n        commit('LOADING', false, { root: true });\n      }\n    },\n    async deleteRound({ commit }, payload) {\n      try {\n        commit('LOADING', true, { root: true });\n        await axios.delete(`/api/rounds/${payload}`);\n        commit('DELETE_ROUND', payload);\n      } catch (e) {\n        commit('ERROR', e, { root: true });\n      } finally {\n        commit('LOADING', false, { root: true });\n      }\n    }\n  },\n  getters: {\n    getRounds(state) {\n      return query => {\n        if (!state.rounds) return [];\n        const teamRounds = state.rounds.filter(\n          round => round.teamId === query.teamId\n        );\n        return teamRounds.filter(round => round.gameId === query.gameId);\n      };\n    }\n  }\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  defineComponent,\n  computed,\n  watch,\n  onUnmounted,\n  ComputedRef,\n  toRefs\n} from '@vue/composition-api';\nimport roundsModule from '@/store/modules/rounds';\nimport { Game, Round, Team } from '@/types';\nimport { Store } from 'vuex';\n\nexport default defineComponent({\n  name: 'TeamPage',\n  components: {\n    RoundsTable: () => import('@/components/RoundsTable.vue'),\n    TheTitle: () => import('@/components/TheTitle.vue'),\n    // TODO:async load with dynamic components\n    TheBarsChart: () => import('@/components/TheBarsChart.vue'),\n    TheTendenciesChart: () => import('@/components/TheTendenciesChart.vue')\n  },\n  props: {\n    teamId: {\n      type: String,\n      required: true\n    }\n  },\n  setup(props, { root: { $store, $route } }) {\n    const { teamId }: any = toRefs(props);\n\n    loadRoundsData($store);\n\n    const currentTab = 'tab-0';\n    const gameId = $route.query.gameId;\n\n    const games: ComputedRef<Game[]> = computed(() => $store.state.games);\n    const getGame: ComputedRef<Game> = computed(() =>\n      $store.getters['games/getGame'](gameId)\n    );\n    const game: ComputedRef<Game | null> = computed(() =>\n      games ? getGame.value : null\n    );\n\n    const teams: ComputedRef<Team[]> = computed(() => $store.state.teams);\n    const getTeams: ComputedRef<Team> = computed(() =>\n      $store.getters['teams/getTeam'](teamId.value)\n    );\n    const team: ComputedRef<Team | null> = computed(() =>\n      teams ? getTeams.value : null\n    );\n\n    const gameTeam = computed(() => game && team);\n\n    const rounds: ComputedRef<Round[]> = computed(() => {\n      const query = { teamId: teamId.value, gameId: gameId };\n      const rounds: Round[] = $store.getters['rounds/getRounds'](query);\n      if (rounds) {\n        rounds.forEach((round: any) => (round[round.winner] = 'VICTORY'));\n      }\n\n      return rounds;\n    });\n\n    const tabs = computed(() => {\n      const tabsToShow = [\n        {\n          name: 'Table',\n          icon: 'table-large',\n          component: 'rounds-table'\n        },\n        {\n          name: 'Statistics',\n          icon: 'chart-bar',\n          component: 'the-bars-chart'\n        }\n      ];\n      const roundsMonths = rounds.value.map(\n        (round: any) => round.date && new Date(round.date).getMonth()\n      );\n\n      const hasRoundsInDifferentMonths = new Set(roundsMonths).size > 1;\n\n      if (hasRoundsInDifferentMonths) {\n        tabsToShow.push({\n          name: 'Tendencies',\n          icon: 'chart-line',\n          component: 'the-tendencies-chart'\n        });\n      }\n\n      return tabsToShow;\n    });\n\n    const showTable = computed(() => gameTeam && rounds.value?.length);\n\n    onUnmounted(() => $store.dispatch('setBackTitle'));\n\n    watch(\n      teams,\n      val => {\n        if (val && !!game.value && !!team.value) {\n          $store.dispatch(\n            'setBackTitle',\n            `${team.value.name}: ${game.value.name}`\n          );\n        }\n      },\n      {\n        immediate: true,\n        deep: true\n      }\n    );\n\n    return {\n      currentTab,\n      gameId,\n      tabs,\n      game,\n      team,\n      gameTeam,\n      rounds,\n      showTable\n    };\n  }\n});\n\nconst loadRoundsData = (store: Store<any>) => {\n  const isRounds = store.hasModule('rounds');\n  isRounds || store.registerModule('rounds', roundsModule);\n  store.dispatch('rounds/loadRounds');\n};\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Team.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Team.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Team.vue?vue&type=template&id=891870e6&\"\nimport script from \"./Team.vue?vue&type=script&lang=ts&\"\nexport * from \"./Team.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VTab } from 'vuetify/lib/components/VTabs';\nimport { VTabItem } from 'vuetify/lib/components/VTabs';\nimport { VTabs } from 'vuetify/lib/components/VTabs';\nimport { VTabsItems } from 'vuetify/lib/components/VTabs';\nimport { VTabsSlider } from 'vuetify/lib/components/VTabs';\ninstallComponents(component, {VIcon,VTab,VTabItem,VTabs,VTabsItems,VTabsSlider})\n"],"sourceRoot":""}