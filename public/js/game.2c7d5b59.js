(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["game"],{"1a55":function(e,t,a){"use strict";a("7095")},"1efd":function(e,t,a){e.exports=a.p+"img/team.76152c6e.jpg"},"3be5":function(e,t,a){},"4f0c":function(e,t,a){e.exports=a.p+"img/game.10a04d7d.webp"},"53c0":function(e,t,a){"use strict";a("3be5")},"544f":function(e,t,a){var n={"./team.jpg":"1efd","./team.webp":"c368"};function r(e){var t=i(e);return a(t)}function i(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id="544f"},7095:function(e,t,a){},9365:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"game"},[a("TheTitle",{attrs:{title:"Teams",icon:"account-group",props:{gameId:e.gameId},component:"teams-add-dialog"}}),e.winRate?a("div",{staticClass:"win-rate"},[a("v-icon",{staticClass:"mr-3",attrs:{dark:"",color:"primary"}},[e._v("mdi-brightness-percent")]),a("span",[e._v("Your win rate is: "+e._s(e.winRate))])],1):e._e(),e.gameTeams?a("TheCardsList",{attrs:{"card-items":e.gameTeams,"card-route":e.teamRoute},on:{favorite:e.toggleFavoriteTeam},scopedSlots:e._u([{key:"action",fn:function(e){var t=e.item;return[a("TeamsEditDialog",{attrs:{team:t}})]}}],null,!1,1145852791)}):e._e()],1)},r=[],i=a("5530"),o=(a("b0c0"),a("a6f4")),s=a("882a"),c=a("baab"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("BaseDialog",{attrs:{"activator-icon":"pencil",color:"#fff",header:"Edit team info",simple:"","submit-logic":e.onSubmit}},[a("v-text-field",{attrs:{clearable:"",rules:e.nameRules,label:"Name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("v-switch",{attrs:{label:"Delete team",color:"error","hide-details":""},model:{value:e.toDelete,callback:function(t){e.toDelete=t},expression:"toDelete"}})],1)},u=[],d=a("2909"),m=(a("99af"),a("9dd9")),f=Object(o["c"])({name:"TeamsEditDialog",props:{team:{type:Object,required:!0}},setup:function(e,t){var a=Object(o["i"])(e),n=a.team,r=t.root.$store,s=Object(o["g"])({name:n.value.name,toDelete:!1,nameRules:[].concat(Object(d["a"])(m["e"]),[m["c"]])}),c=function(){var e={_id:n.value._id,gameId:n.value.gameId,name:s.name};r.dispatch("teams/updateTeam",e)},l=function(){if(!s.toDelete)return c();r.dispatch("teams/deleteTeam",n.value._id)};return Object(i["a"])({onSubmit:l},Object(o["i"])(s))}}),v=f,p=a("2877"),b=a("6544"),g=a.n(b),h=a("b73d"),O=a("8654"),j=Object(p["a"])(v,l,u,!1,null,null,null),_=j.exports;g()(j,{VSwitch:h["a"],VTextField:O["a"]});var y=Object(o["c"])({name:"Game",components:{TheTitle:s["a"],TeamsEditDialog:_,TheCardsList:c["a"]},props:{gameId:{type:String,required:!0}},setup:function(e,t){var a=Object(o["i"])(e),n=a.gameId,r=t.root.$store,s=Object(o["a"])((function(){return r.state.teams.teams})),c=Object(o["a"])((function(){return r.state.games.games})),l=function(){return r.dispatch("games/loadGames")},u=function(){return r.dispatch("games/loadWinRate",n.value)},d=function(){return r.dispatch("teams/loadTeams")},m=function(){var e,t;null!==(e=null===s||void 0===s?void 0:s.value)&&void 0!==e||d(),null!==(t=null===c||void 0===c?void 0:c.value)&&void 0!==t||l(),u()};m();var f=Object(o["a"])((function(){return r.state.games.winRate})),v=function(){return r.getters["teams/getGameTeams"](n.value)},p=Object(o["a"])((function(){return null!==s&&void 0!==s&&s.value?v():null})),b=function(){return r.getters["games/getGame"](n.value)},g=Object(o["a"])((function(){return{name:"team",params:{teamId:""},query:{gameId:n.value}}})),h=function(e){return r.dispatch("teams/updateTeam",e)},O=function(e){var t=Object(i["a"])(Object(i["a"])({},e),{},{gameId:n.value});h(t)},j=function(e){return r.dispatch("setBackTitle",e)};return Object(o["d"])((function(){return j()})),Object(o["k"])((function(){if(c.value){var e=b(),t=e.name;j(t)}})),{winRate:f,gameTeams:p,teamRoute:g,toggleFavoriteTeam:O}}}),w=y,C=(a("53c0"),a("132d")),I=Object(p["a"])(w,n,r,!1,null,null,null);t["default"]=I.exports;g()(I,{VIcon:C["a"]})},baab:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"the-cards-list"},[a("v-row",[a("v-col",{attrs:{sm:"6",md:"4",cols:"12"}},[e.cardItems.length>3?a("v-text-field",{attrs:{clearable:"","append-icon":"mdi-magnify",dark:"",outlined:"",rounded:"",label:"Search"},model:{value:e.searchedValue,callback:function(t){e.searchedValue=t},expression:"searchedValue"}}):e._e()],1)],1),a("v-row",e._l(e.filteredCards,(function(t){return a("v-col",{key:t._id,staticClass:"mb-6",attrs:{sm:"6",md:"4",cols:"12"}},[a("v-lazy",{attrs:{options:{threshold:.5},"min-height":"200",transition:"fade-transition"}},[a("TheCard",{attrs:{"card-info":t,"card-route":e.cardRoute,"is-favorite":e.cardItems.length>1},on:{favorite:function(t){return e.$emit("favorite",t)}},scopedSlots:e._u([{key:"action",fn:function(t){var a=t.item;return[e._t("action",null,{item:a})]}}],null,!0)})],1)],1)})),1)],1)},r=[],i=(a("fb6a"),a("4e827"),a("4de4"),a("ac1f"),a("1276"),a("caad"),a("2532"),a("b0c0"),a("a6f4")),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{key:e.cardInfo._id,staticClass:"mx-auto app-card",attrs:{dark:"",raised:"","aria-describedby":e.cardInfo.name}},[a("router-link",{attrs:{to:e.formattedRoute}},[a("div",{staticClass:"title-wrap"},[a("v-card-title",{staticClass:"row_between"},[a("span",{staticClass:"card-list-name"},[e._v(e._s(e.cardInfo.name))]),e._t("action",null,{item:e.cardInfo})],2)],1),e.cardInfo.players?a("v-list",{staticClass:"players",attrs:{dense:"",disabled:""}},[a("v-list-item-group",e._l(e.cardInfo.players,(function(t){var n=t.name;return a("v-list-item",{key:n},[a("v-list-item-icon",[a("v-icon",{domProps:{textContent:e._s("mdi-account")}})],1),a("v-list-item-content",{domProps:{textContent:e._s(n)}})],1)})),1)],1):e._e(),a("v-img",{staticClass:"white--text align-end",attrs:{height:"350",src:e.getImagePath(),srcset:e.getImagePath("webp"),alt:e.cardInfo.name},scopedSlots:e._u([{key:"placeholder",fn:function(){return[a("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[a("v-progress-circular",{attrs:{indeterminate:"",color:"secondary"}})],1)]},proxy:!0}])},[a("div",{staticClass:"title-wrap"},[a("v-card-title",{staticClass:"card-list-actions"},[e.additionalLinks.length?e._l(e.additionalLinks,(function(t,n){return a("v-btn",{key:n,staticClass:"px-0 mx-1",attrs:{href:t.href,target:"_blank",download:t.download,rel:"noopener noreferrer",small:"","aria-label":e.cardInfo.name,text:"",fab:"",color:"#fff"},on:{click:function(e){e.stopPropagation()}}},[a("v-icon",{attrs:{dark:""}},[e._v("mdi-"+e._s(t.icon))])],1)})):e._e(),e.isFavorite?a("v-btn",{staticClass:"px-0 mx-1",attrs:{small:"",text:"","aria-label":"Favorite",fab:"",color:e.cardInfo.favorite?"error":"#fff"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.toggleFavorite.apply(null,arguments)}}},[a("v-icon",{attrs:{dark:""}},[e._v("mdi-heart")])],1):e._e()],2)],1)])],1)],1)},s=[],c=a("ade3"),l=a("5530"),u=(a("b64b"),Object(i["c"])({name:"TheCard",props:{cardRoute:{type:Object,required:!0},cardInfo:{type:Object,required:!0},isFavorite:{type:Boolean}},setup:function(e,t){var n=Object(i["i"])(e),r=n.cardInfo,o=n.cardRoute,s=Object(i["a"])((function(){var e=[],t=r.value,a=t.bggURL,n=t.rulesURL,i=t.melodiceURL;if(a){var o={href:a,name:"Board game geek",icon:"cards"};e.push(o)}if(n){var s={href:n,name:"Rules",icon:"book-open-variant",download:!0};e.push(s)}if(i){var c={href:i,name:"Melodice",icon:"music"};e.push(c)}return e})),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"jpg",t=r.value,n=t.imageUrl,i=t.teams;return n?i?a("e679")("./game.".concat(e)):n:a("544f")("./team.".concat(e))},d=Object(i["a"])((function(){var e=Object(l["a"])({},o.value);return e.params=Object(c["a"])({},Object.keys(o.value.params)[0],r.value._id),e})),m=function(){var e=!r.value.favorite,a={favorite:e,_id:r.value._id};t.emit("favorite",a)};return{additionalLinks:s,formattedRoute:d,getImagePath:u,toggleFavorite:m}}})),d=u,m=(a("1a55"),a("2877")),f=a("6544"),v=a.n(f),p=a("8336"),b=a("b0af"),g=a("99d9"),h=a("132d"),O=a("adda"),j=a("8860"),_=a("da13"),y=a("5d23"),w=a("1baa"),C=a("34c3"),I=a("490a"),k=a("0fd9"),T=Object(m["a"])(d,o,s,!1,null,"51806033",null),x=T.exports;v()(T,{VBtn:p["a"],VCard:b["a"],VCardTitle:g["c"],VIcon:h["a"],VImg:O["a"],VList:j["a"],VListItem:_["a"],VListItemContent:y["a"],VListItemGroup:w["a"],VListItemIcon:C["a"],VProgressCircular:I["a"],VRow:k["a"]});var V=Object(i["c"])({name:"TheCardsList",components:{TheCard:x},props:{cardItems:{type:Array,required:!0},cardRoute:{type:Object,required:!0}},setup:function(e){var t=Object(i["i"])(e),a=t.cardItems,n=Object(i["h"])(""),r=function(e){var t=e.slice().reverse();return t.sort((function(e,t){return t.favorite-e.favorite}))},o=function(){return a.value.filter((function(e){return n.value.toLowerCase().split(" ").every((function(t){return e.name.toLowerCase().includes(t)}))}))},s=Object(i["a"])((function(){if(!n.value)return r(a.value);var e=o();return r(e)}));return{searchedValue:n,filteredCards:s}}}),R=V,L=a("62ad"),D=a("24b2"),E=a("f2e7"),F=a("90a2"),S=a("58df"),$=a("80d2"),P=Object(S["a"])(D["a"],E["a"]).extend({name:"VLazy",directives:{intersect:F["a"]},props:{options:{type:Object,default:function(){return{root:void 0,rootMargin:void 0,threshold:void 0}}},tag:{type:String,default:"div"},transition:{type:String,default:"fade-transition"}},computed:{styles:function(){return Object(l["a"])({},this.measurableStyles)}},methods:{genContent:function(){var e=this.isActive&&Object($["s"])(this);return this.transition?this.$createElement("transition",{props:{name:this.transition}},e):e},onObserve:function(e,t,a){this.isActive||(this.isActive=a)}},render:function(e){return e(this.tag,{staticClass:"v-lazy",attrs:this.$attrs,directives:[{name:"intersect",value:{handler:this.onObserve,options:this.options}}],on:this.$listeners,style:this.styles},[this.genContent()])}}),U=a("8654"),q=Object(m["a"])(R,n,r,!1,null,null,null);t["a"]=q.exports;v()(q,{VCol:L["a"],VLazy:P,VRow:k["a"],VTextField:U["a"]})},c368:function(e,t,a){e.exports=a.p+"img/team.bf4c6f13.webp"},cdc8:function(e,t,a){e.exports=a.p+"img/game.711fd041.jpg"},e679:function(e,t,a){var n={"./game.jpg":"cdc8","./game.webp":"4f0c"};function r(e){var t=i(e);return a(t)}function i(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id="e679"}}]);
//# sourceMappingURL=game.2c7d5b59.js.map